<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>Cupido kuponok</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet" />
    <script src="script.js" defer></script>
    <script src="snow.js" defer></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <!-- Login screen -->
    <div id="login-screen">
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <i class="fas fa-heart" style="color: #fc0038; font-size: 28px"></i>
                    <h2>Cupido kuponok</h2>
                    <p class="text-muted">Jelentkezz be a folytatáshoz</p>
                </div>

                <form id="login-form">
                    <div class="mb-3">
                        <label class="form-label">Email cím</label>
                        <input type="email" class="form-control" id="login-email" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Jelszó</label>
                        <input type="password" class="form-control" id="login-password" required />
                    </div>
                    <button type="submit" class="btn btn-login w-100">
                        <i class="fas fa-sign-in-alt"></i> Bejelentkezés
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main app -->
    <div id="main-app" style="display: none">
        <!-- Hóhullás canvas (csak advent oldalon lesz látható) -->
        <canvas id="snow-canvas"></canvas>
        
        <nav class="navbar navbar-expand-lg navbar-light bg-white sticky-top">
            <div class="container-fluid">
                <a class="navbar-brand" href="#" onclick="showPage('elerheto')">
                    <i class="fas fa-heart" style="color: #fc0038"></i> Cupido kuponok
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto align-items-center">
                        <li class="nav-item advent-nav" style="display:none">
                            <a class="nav-link" href="#" onclick="showPage('advent')"><i class="fas fa-gifts"></i>
                                Advent</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#" onclick="showPage('elerheto')"><i
                                    class="fas fa-tags"></i> Elérhető Kuponok</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('aktivalt')"><i
                                    class="fas fa-check-circle"></i> Aktivált Kuponok</a>
                        </li>
                        <li class="nav-item admin-only" style="display: none">
                            <a class="nav-link" href="#" onclick="showPage('admin')"><i class="fas fa-cog"></i>
                                Admin</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="showPage('info')"><i class="fas fa-list-alt"></i>
                                Infó</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i>
                                Kilépés</a>
                        </li>
                        <li class="nav-item">
                            <span class="nav-link user-info" id="user-info"></span>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container py-4">
            <div id="advent-page" style="display: none">
                <h1 class="page-title">
                    <i class="fas fa-gifts"></i> Adventi naptár
                </h1>
                <div id="advent" class="row g-4"></div>
            </div>

            <div id="elerheto-page">
                <h1 class="page-title">
                    <i class="fas fa-tags"></i> Elérhető Kuponok
                </h1>
                <div id="elerheto-kuponok" class="row g-4"></div>
            </div>

            <div id="aktivalt-page" style="display: none">
                <h1 class="page-title">
                    <i class="fas fa-check-circle"></i> Aktivált Kuponok
                </h1>
                <div id="aktivalt-kuponok" class="row g-4"></div>
            </div>

            <div id="info-page" style="display: none">
                <h1 class="page-title">
                    <i class="fas fa-info-circle"></i> Információk
                </h1>

                <!-- Szabályok -->

                <div class="card kupon-card mb-4">
                    <div class="card-header">
                        <i class="fas fa-gavel"></i> Szabályok
                    </div>

                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-lock text-danger"></i>

                            Ezek a kuponok <strong>kötelező érvényűek</strong>, ha kéred,
                            megkapod.
                        </div>

                        <div class="mb-3">
                            <i class="fas fa-calendar-alt text-warning"></i>

                            <strong>Havonta csak 1 VIP</strong> kupont használhatsz fel,
                            illetve az <strong>összes Havi </strong>kupont.
                        </div>

                        <div>
                            <i class="fas fa-clock text-info"></i>

                            <strong>VIP </strong>kupont az
                            <strong>adott hónap 15-ig</strong> használhatod fel, a
                            <strong>Havit bármikor</strong>.
                        </div>
                    </div>
                </div>

                <!-- Információk -->

                <div class="card kupon-card mb-4">
                    <div class="card-header">
                        <i class="fas fa-lightbulb"></i> Tudnivalók
                    </div>

                    <div class="card-body">
                        <div class="mb-3">
                            <i class="fas fa-star text-warning"></i>

                            A <strong>VIP kuponok egyszer használatosak</strong>.
                        </div>

                        <div class="mb-3">
                            <i class="fas fa-redo text-success"></i>

                            A <strong>Havi kuponok havonta újraaktiválódnak</strong>.
                        </div>

                        <div class="mb-3">
                            <i class="fas fa-bell text-danger"></i>

                            Ha lesznek új kuponok, arról <strong>értesítést kapsz</strong>.
                        </div>

                        <div>
                            <i class="fas fa-sync-alt text-primary"></i>

                            Igyekszem frissíteni, ha van jó ötletem.
                        </div>
                    </div>
                </div>

                <!-- Verzió -->

                <div class="card kupon-card">
                    <div class="card-body text-center">
                        <i class="fas fa-code-branch"></i>

                        <strong>Verzió:</strong> 1.3
                    </div>
                </div>
            </div>

            <div id="admin-page" style="display: none">
                <h1 class="page-title"><i class="fas fa-cog"></i> Admin Panel</h1>

                <!-- Kupon hozzáadás -->
                <div class="card kupon-card mt-3">
                    <div class="card-header">
                        <i class="fas fa-plus-circle"></i> Új Kupon Hozzáadása
                    </div>
                    <div class="card-body">
                        <form id="kupon-form">
                            <div class="mb-3">
                                <label class="form-label">Kupon Neve</label><input id="kupon-nev" class="form-control"
                                    required />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Leírás</label><textarea id="kupon-leiras" class="form-control"
                                    rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ikon (pl. fa-gift)</label><input id="kupon-icon"
                                    class="form-control" value="fa-gift" required />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Típus</label>
                                <select id="kupon-tipus" class="form-select" required>
                                    <option value="vip">VIP</option>
                                    <option value="havi">Havi</option>
                                </select>
                            </div>
                            <button class="btn btn-kupon btn-primary" type="submit">
                                <i class="fas fa-plus"></i> Hozzáadás
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Kupon lista -->
                <div class="card kupon-card mt-4">
                    <div class="card-header">
                        <i class="fas fa-list"></i> Összes Kupon Kezelése
                    </div>
                    <div class="card-body" id="admin-kuponok-lista"></div>
                </div>

                <!-- Advent Admin -->
                <div class="card kupon-card mt-3">
                    <div class="card-header">
                        <i class="fas fa-gift"></i> Új Adventi Kártya
                    </div>
                    <div class="card-body">
                        <form id="advent-form" onsubmit="addAdventCard(event)">
                            <div class="mb-3">
                                <label class="form-label">Cím</label><input id="advent-cim" class="form-control"
                                    required />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Tartalom</label><textarea id="advent-tartalom"
                                    class="form-control" rows="3" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Ikon (fa-gift, fa-tree, fa-dollar-sign, fa-snowman, fa-candy-cane, fa-sleigh, )</label><input id="advent-icon"
                                    class="form-control" value="fa-gift" />
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Nap (1–24)</label><input type="number" id="advent-nap"
                                    class="form-control" min="1" max="24" required />
                            </div>
                            <button class="btn btn-kupon w-100" type="submit">
                                <i class="fas fa-plus"></i> Hozzáadás
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Advent list -->
                <div class="card kupon-card mt-3">
                    <div class="card-header">
                        <i class="fas fa-list"></i> Adventi kártyák
                    </div>
                    <div class="card-body" id="admin-advent-lista"></div>
                </div>

                <!-- Konfiguráció -->
                <div class="card kupon-card mt-4">
                    <div class="card-header">
                        <i class="fas fa-key"></i> Konfiguráció
                    </div>
                    <div class="card-body">
                        <h5>Firebase Konfiguráció (JSON)</h5>
                        <textarea id="firebase-config" class="form-control mb-3" rows="8"
                            placeholder='{"apiKey":"...","authDomain":"..."}'></textarea>
                        <button class="btn btn-primary mb-3" onclick="saveFirebaseConfig()">
                            <i class="fas fa-save"></i> Mentés Firestore-ba
                        </button>

                        <h5>EmailJS Konfiguráció</h5>
                        <input id="emailjs-service" class="form-control mb-2" placeholder="Service ID" />
                        <input id="emailjs-template" class="form-control mb-2" placeholder="Template ID" />
                        <input id="emailjs-public" class="form-control mb-3" placeholder="Public Key" />
                        <button class="btn btn-primary" onclick="saveEmailJSConfig()">
                            <i class="fas fa-save"></i> Mentés Firestore-ba
                        </button>
                        <h5>Advent kapcsoló</h5>
                        <input id="advent-switch" class="form-control mb-2" placeholder="Advent" />
                        <button class="btn btn-primary " onclick="saveAdvent()">
                            <i class="fas fa-save"></i> Mentés Firestore-ba
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>